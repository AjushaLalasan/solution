<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Update and Feedback Forms Demo</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        .App {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        .forms-container {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }
        .form-container {
            flex: 1;
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        .field {
            margin-bottom: 15px;
        }
        .field label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .field input, .field select, .field textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }
        .error {
            color: red;
            font-size: 12px;
            display: block;
            margin-top: 5px;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .summary-container {
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 8px;
            background-color: #f0f8ff;
        }
        @media (max-width: 768px) {
            .forms-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef } = React;

        const ProfileForm = ({ profileData, setProfileData }) => {
            const [errors, setErrors] = useState({});

            const validateEmail = (email) => {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            };

            const handleChange = (e) => {
                const { name, value } = e.target;
                setProfileData(prev => ({ ...prev, [name]: value }));
                
                if (errors[name]) {
                    setErrors(prev => ({ ...prev, [name]: '' }));
                }
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                const newErrors = {};

                if (!profileData.name.trim()) {
                    newErrors.name = 'Name is required';
                }

                if (!profileData.email.trim()) {
                    newErrors.email = 'Email is required';
                } else if (!validateEmail(profileData.email)) {
                    newErrors.email = 'Email is invalid';
                }

                if (!profileData.age || profileData.age <= 12) {
                    newErrors.age = 'Age must be greater than 12';
                }

                setErrors(newErrors);

                if (Object.keys(newErrors).length === 0) {
                    alert('Profile updated successfully!');
                }
            };

            return (
                <div className="form-container">
                    <h2>Profile Update Form (Controlled)</h2>
                    <form onSubmit={handleSubmit}>
                        <div className="field">
                            <label>Name:</label>
                            <input
                                type="text"
                                name="name"
                                value={profileData.name}
                                onChange={handleChange}
                            />
                            {errors.name && <span className="error">{errors.name}</span>}
                        </div>

                        <div className="field">
                            <label>Email:</label>
                            <input
                                type="email"
                                name="email"
                                value={profileData.email}
                                onChange={handleChange}
                            />
                            {errors.email && <span className="error">{errors.email}</span>}
                        </div>

                        <div className="field">
                            <label>Age:</label>
                            <input
                                type="number"
                                name="age"
                                value={profileData.age}
                                onChange={handleChange}
                            />
                            {errors.age && <span className="error">{errors.age}</span>}
                        </div>

                        <div className="field">
                            <label>Gender:</label>
                            <select
                                name="gender"
                                value={profileData.gender}
                                onChange={handleChange}
                            >
                                <option value="">Select Gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <button type="submit">Update Profile</button>
                    </form>
                </div>
            );
        };

        const FeedbackForm = ({ feedbackData, setFeedbackData }) => {
            const ratingRef = useRef();
            const feedbackMessageRef = useRef();
            const [errors, setErrors] = useState({});

            const handleSubmit = (e) => {
                e.preventDefault();
                const newErrors = {};

                const rating = parseInt(ratingRef.current.value);
                const feedbackMessage = feedbackMessageRef.current.value.trim();

                if (!rating || rating < 1 || rating > 5) {
                    newErrors.rating = 'Rating must be between 1 and 5';
                }

                if (!feedbackMessage) {
                    newErrors.feedbackMessage = 'Feedback message is required';
                }

                setErrors(newErrors);

                if (Object.keys(newErrors).length === 0) {
                    setFeedbackData({
                        rating: rating.toString(),
                        feedbackMessage
                    });
                    alert('Feedback submitted successfully!');
                }
            };

            const handleInputChange = () => {
                setErrors({});
            };

            return (
                <div className="form-container">
                    <h2>Feedback Form (Uncontrolled)</h2>
                    <form onSubmit={handleSubmit}>
                        <div className="field">
                            <label>Rating (1-5):</label>
                            <select ref={ratingRef} onChange={handleInputChange}>
                                <option value="">Select Rating</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                            {errors.rating && <span className="error">{errors.rating}</span>}
                        </div>

                        <div className="field">
                            <label>Feedback Message:</label>
                            <textarea
                                ref={feedbackMessageRef}
                                onChange={handleInputChange}
                                rows="4"
                            />
                            {errors.feedbackMessage && <span className="error">{errors.feedbackMessage}</span>}
                        </div>

                        <button type="submit">Submit Feedback</button>
                    </form>
                </div>
            );
        };

        const Summary = ({ profileData, feedbackData }) => {
            const hasProfileData = profileData.name || profileData.email || profileData.age || profileData.gender;
            const hasFeedbackData = feedbackData.rating || feedbackData.feedbackMessage;

            if (!hasProfileData && !hasFeedbackData) {
                return null;
            }

            return (
                <div className="summary-container">
                    <h2>Summary</h2>
                    
                    {hasProfileData && (
                        <div className="profile-summary">
                            <h3>Profile Information</h3>
                            {profileData.name && <p><strong>Name:</strong> {profileData.name}</p>}
                            {profileData.email && <p><strong>Email:</strong> {profileData.email}</p>}
                            {profileData.age && <p><strong>Age:</strong> {profileData.age}</p>}
                            {profileData.gender && <p><strong>Gender:</strong> {profileData.gender}</p>}
                        </div>
                    )}

                    {hasFeedbackData && (
                        <div className="feedback-summary">
                            <h3>Feedback Information</h3>
                            {feedbackData.rating && <p><strong>Rating:</strong> {feedbackData.rating}/5</p>}
                            {feedbackData.feedbackMessage && <p><strong>Message:</strong> {feedbackData.feedbackMessage}</p>}
                        </div>
                    )}
                </div>
            );
        };

        const App = () => {
            const [profileData, setProfileData] = useState({
                name: '',
                email: '',
                age: '',
                gender: ''
            });

            const [feedbackData, setFeedbackData] = useState({
                rating: '',
                feedbackMessage: ''
            });

            return (
                <div className="App">
                    <h1>Profile Update and Feedback Forms</h1>
                    
                    <div className="forms-container">
                        <ProfileForm 
                            profileData={profileData} 
                            setProfileData={setProfileData} 
                        />
                        
                        <FeedbackForm 
                            feedbackData={feedbackData} 
                            setFeedbackData={setFeedbackData} 
                        />
                    </div>
                    
                    <Summary 
                        profileData={profileData} 
                        feedbackData={feedbackData} 
                    />
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>